local HttpService = game:GetService("HttpService")
local MainFolder = "Eternal"
local ConfigFolder = MainFolder .. "/config"
local LogsFolder = MainFolder .. "/logs"
local Library = "https://raw.githubusercontent.com/AfgMS/EternalForRoblox/main/Eternal/library.txt"
local Universal = "https://raw.githubusercontent.com/AfgMS/EternalForRoblox/main/Eternal/config/Universal.txt"

local function GetGithub(url, path)
	local success, response = pcall(function()
		return HttpService:GetAsync(url)
	end)

	if success then
		local fileContent
		if isfile(path) then
			fileContent = readfile(path)
		end

		if fileContent ~= response then
			writefile(path, response)
			print("Updated:", path)
		else
			print("Up to date!")
		end
	else
		writefile(LogsFolder .. "/update_error.txt", "Unable to update Eternal, if you think that this is a bug. Please report at discord.gg/VuamOWAasa")
	end
end

if not isfolder(MainFolder) then makefolder(MainFolder) end
if not isfolder(ConfigFolder) then makefolder(ConfigFolder) end
if not isfolder(LogsFolder) then makefolder(LogsFolder) end

if isfolder(MainFolder) and isfolder(ConfigFolder) and isfolder(LogsFolder) then
	GetGithub(Library, MainFolder .. "/Library.lua")

	if game.PlaceId == 6872274481 or game.PlaceId == 8560631822 or game.PlaceId == 8444591321 then
		writefile(LogsFolder .. "/error_" .. game.PlaceId .. ".txt", "This game is not supported by Eternal")
	else
		loadstring(game:HttpGet(Universal))()
	end
end
